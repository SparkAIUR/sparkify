import{j as t}from"./jsx-runtime.D_zvdyIk.js";import{r as o}from"./index.BMc0qTdX.js";import{c as u}from"./cn.C3L7WLNA.js";import"./_commonjsHelpers.CqkleIqs.js";function g({headings:n}){const[c,d]=o.useState([]),s=o.useMemo(()=>n&&n.length>0?n.filter(e=>e.depth>=2&&e.depth<=3):c,[n,c]),[p,a]=o.useState("");o.useEffect(()=>{if(n&&n.length>0)return;const e=Array.from(document.querySelectorAll("#main-content article :is(h2, h3)")).filter(r=>r.id).map(r=>({depth:Number.parseInt(r.tagName.slice(1),10),slug:r.id,text:r.textContent?.trim()||r.id}));d(e)},[n]);const l=o.useCallback(()=>{const e=s.map(i=>document.getElementById(i.slug)).filter(Boolean);if(e.length===0)return;if(window.innerHeight+window.scrollY>=document.body.scrollHeight-10){a(e[e.length-1].id);return}let r="";for(const i of e)if(i.getBoundingClientRect().top<=150)r=i.id;else break;a(r||e[0].id)},[s]);return o.useEffect(()=>(l(),window.addEventListener("scroll",l,{passive:!0}),()=>window.removeEventListener("scroll",l)),[l]),s.length===0?null:t.jsxs(t.Fragment,{children:[t.jsx("style",{children:`
        .toc-wrapper {
          display: none;
        }
        @container (min-width: 1100px) {
          .toc-wrapper {
            display: flex;
          }
        }
      `}),t.jsx("div",{className:"toc-wrapper flex-col sticky top-[9.5rem] h-[calc(100vh-9.5rem)] w-80 shrink-0 pl-10",children:t.jsxs("nav",{className:"overflow-y-auto text-sm leading-6 pt-2 pb-8",children:[t.jsxs("button",{onClick:()=>window.scrollTo({top:0,behavior:"instant"}),className:"font-medium text-gray-900 mb-3 flex items-center gap-2 cursor-pointer hover:text-gray-600 transition-colors",children:[t.jsx(m,{}),t.jsx("span",{children:"On this page"})]}),t.jsx("ul",{className:"space-y-0.5",children:s.map(e=>{const r=p===e.slug;return t.jsx("li",{children:t.jsx("a",{href:`#${e.slug}`,className:u("block py-1 wrap-break-word transition-colors",e.depth>2?"pl-4":"pl-0",r?"font-medium text-(--primary)":"text-gray-500 hover:text-gray-900"),children:e.text})},e.slug)})})]})})]})}function m(){return t.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2",xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",children:[t.jsx("path",{d:"M2.44434 12.6665H13.5554",strokeLinecap:"round",strokeLinejoin:"round"}),t.jsx("path",{d:"M2.44434 3.3335H13.5554",strokeLinecap:"round",strokeLinejoin:"round"}),t.jsx("path",{d:"M2.44434 8H7.33323",strokeLinecap:"round",strokeLinejoin:"round"})]})}export{g as default};
