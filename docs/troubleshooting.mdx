---
title: "Troubleshooting"
description: "Common sparkify failures and direct remediation paths for build, API, and deployment issues."
---

# Troubleshooting

## Fast diagnosis flow

<Steps>
  <Step title="Run doctor first">

```bash
npx sparkify doctor --config ./sparkify.config.json
```

  </Step>
  <Step title="Run strict build">

```bash
npx sparkify build --config ./sparkify.config.json --strict
```

  </Step>
  <Step title="Fix highest-severity failures first">
    1) invalid config/docs json, 2) invalid OpenAPI, 3) routing/base-path issues.
  </Step>
</Steps>

## Common failure classes

<AccordionGroup>
  <Accordion title="Broken links in strict mode">
    Ensure every internal href resolves to a real generated route. Fix stale paths and missing assets.
  </Accordion>
  <Accordion title="Wrong base path on deployed site">
    Set `--base /repo` for project pages and rebuild. Verify links/assets under that prefix.
  </Accordion>
  <Accordion title="Remote OpenAPI fetch errors">
    Fetch and pin the schema in CI, then build from local path.
  </Accordion>
  <Accordion title="Try It requests fail in browser">
    Configure API CORS or set `playground.tryItCorsProxy`.
  </Accordion>
  <Accordion title="FastAPI export import side effects">
    Use `--cwd`, `--env-file`, and `--pythonpath` to match app runtime.
  </Accordion>
  <Accordion title="Icon rendering inconsistencies">
    Verify icon names are valid for selected icon source and avoid forcing incompatible libraries.
  </Accordion>
</AccordionGroup>

## Exit code map

| Exit code | Category |
| --- | --- |
| `1` | General failure |
| `2` | Invalid config |
| `3` | Invalid docs config |
| `4` | Invalid OpenAPI |
| `5` | Build failure |

## Useful commands

<CodeGroup>

```bash doctor
npx sparkify doctor --docs-dir ./docs
```

```bash strict-build
npx sparkify build --docs-dir ./docs --out ./dist --strict
```

```bash fastapi-export
npx sparkify export-openapi --fastapi "app.main:app" --out ./docs/openapi.json
```

</CodeGroup>
